<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>× ×™×”×•×œ ×”×¤×¢×™×œ×•×ª | ×¤×•×¨×¦×•×ª ×“×¨×š</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #000000;
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(255, 0, 127, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 20, 147, 0.1) 0%, transparent 50%);
      animation: glow 15s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }
    
    @keyframes glow {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(5%, 5%) scale(1.1); }
    }
    
    .container {
      position: relative;
      z-index: 1;
      max-width: 600px;
      width: 100%;
    }
    
    .admin-card {
      background: rgba(30, 30, 35, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 48px 40px;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.5),
        0 0 60px rgba(255, 20, 147, 0.3);
      border: 1px solid rgba(255, 20, 147, 0.4);
    }
    
    h1 {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 12px;
      text-align: center;
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .subtitle {
      text-align: center;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 36px;
      font-size: 16px;
    }
    
    .setup-view, .monitoring-view {
      display: none;
    }
    
    .setup-view.active, .monitoring-view.active {
      display: block;
    }
    
    .form-group {
      margin-bottom: 28px;
    }
    
    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      color: #ff69b4;
      font-size: 15px;
    }
    
    input[type="text"],
    input[type="number"] {
      width: 100%;
      padding: 16px;
      font-size: 16px;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 20, 147, 0.3);
      border-radius: 12px;
      color: #ffffff;
      transition: all 0.3s ease;
    }
    
    input[type="text"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: #ff1493;
      box-shadow: 0 0 20px rgba(255, 20, 147, 0.3);
    }
    
    input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }
    
    .info-box {
      background: rgba(255, 20, 147, 0.1);
      border: 1px solid rgba(255, 20, 147, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 28px;
      font-size: 14px;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .info-box strong {
      color: #ff69b4;
    }
    
    .progress-container {
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 20, 147, 0.3);
      border-radius: 16px;
      padding: 32px;
      margin-bottom: 32px;
      text-align: center;
    }
    
    .progress-title {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 20px;
    }
    
    .progress-numbers {
      font-size: 56px;
      font-weight: 700;
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .progress-numbers .separator {
      color: rgba(255, 255, 255, 0.5);
      font-size: 48px;
    }
    
    .progress-label {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 24px;
    }
    
    .progress-bar-wrapper {
      width: 100%;
      height: 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: 12px;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #ff1493, #ff69b4);
      border-radius: 6px;
      transition: width 0.6s ease;
      box-shadow: 0 0 20px rgba(255, 20, 147, 0.6);
    }
    
    .progress-percentage {
      font-size: 16px;
      font-weight: 600;
      color: #ff69b4;
    }
    
    .refresh-timer {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 16px;
      font-style: italic;
    }
    
    .refresh-timer.active {
      color: #ff69b4;
      animation: pulse 1s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    
    .status-badge {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 16px;
    }
    
    .status-badge.active {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
      border: 1px solid rgba(76, 175, 80, 0.4);
    }
    
    .status-badge.complete {
      background: rgba(255, 215, 0, 0.2);
      color: #ffd700;
      border: 1px solid rgba(255, 215, 0, 0.4);
      animation: shimmerBadge 2s ease-in-out infinite;
    }
    
    @keyframes shimmerBadge {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .btn {
      width: 100%;
      padding: 18px;
      font-size: 18px;
      font-weight: 700;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 12px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      color: white;
      box-shadow: 0 6px 20px rgba(255, 20, 147, 0.4);
    }
    
    .btn-primary:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(255, 20, 147, 0.6);
    }
    
    .btn-primary:active:not(:disabled) {
      transform: translateY(-1px);
    }
    
    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }
    
    .btn-danger {
      background: rgba(244, 67, 54, 0.2);
      color: #f44336;
      border: 1px solid rgba(244, 67, 54, 0.4);
    }
    
    .btn-danger:hover {
      background: rgba(244, 67, 54, 0.3);
      transform: translateY(-2px);
    }
    
    .buttons-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 24px;
    }
    
    .status-msg {
      text-align: center;
      margin-top: 20px;
      padding: 12px;
      border-radius: 10px;
      font-weight: 600;
      min-height: 20px;
    }
    
    .status-success {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
      border: 1px solid rgba(76, 175, 80, 0.4);
    }
    
    .status-error {
      background: rgba(244, 67, 54, 0.2);
      color: #f44336;
      border: 1px solid rgba(244, 67, 54, 0.4);
    }
    
    .back-link {
      display: inline-block;
      margin-top: 24px;
      color: rgba(255, 255, 255, 0.6);
      text-decoration: none;
      font-size: 14px;
      transition: color 0.3s ease;
    }
    
    .back-link:hover {
      color: #ff69b4;
    }
    
    @media (max-width: 768px) {
      .admin-card {
        padding: 36px 28px;
      }
      
      h1 {
        font-size: 26px;
      }
      
      .progress-numbers {
        font-size: 42px;
      }
      
      .buttons-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>

  <div class="container">
    <div class="admin-card">
      
      <h1>× ×™×”×•×œ ×”×¤×¢×™×œ×•×ª</h1>
      <p class="subtitle">×”×’×“×¨×•×ª ×•××¢×§×‘ ×–×™×•×•×’ ××©×ª×ª×¤×•×ª</p>
      
      <!-- ×ª×¦×•×’×ª ×”×’×“×¨×” ×¨××©×•× ×™×ª -->
      <div class="setup-view active">
        
        <div class="info-box">
          <strong>×©×™××™ ×œ×‘:</strong> ×œ××—×¨ ×”×–× ×ª ×”×¤×¨×˜×™× ×•×”×¤×¢×œ×ª ×”×¤×¢×™×œ×•×ª, ×”××©×ª×ª×¤×•×ª ×™×•×›×œ×• ×œ×”×ª×—×™×œ ××ª ×ª×”×œ×™×š ×”×–×™×•×•×’ ×‘×¢××•×“ ×”×¨××©×™.
        </div>
        
        <form id="activityForm">
          
          <div class="form-group">
            <label for="instructorCode">×§×•×“ ××“×¨×™×›×” (2311)</label>
            <input 
              type="text" 
              id="instructorCode" 
              placeholder="×”×–×™× ×™ ××ª ×§×•×“ ×”××“×¨×™×›×”"
              value="2311"
              required
            >
          </div>
          
          <div class="form-group">
            <label for="participantCount">××¡×¤×¨ ××©×ª×ª×¤×•×ª</label>
            <input 
              type="number" 
              id="participantCount" 
              placeholder="×›××” ××©×ª×ª×¤×•×ª ×‘×¤×¢×™×œ×•×ª?"
              min="2"
              required
            >
          </div>
          
          <button type="submit" class="btn btn-primary" id="startBtn">
            ğŸš€ ×”×ª×—×™×œ×™ ××ª ×”×¤×¢×™×œ×•×ª
          </button>
          
        </form>
        
        <div id="setupStatusMsg" class="status-msg"></div>
        
      </div>
      
      <!-- ×ª×¦×•×’×ª ××¢×§×‘ -->
      <div class="monitoring-view">
        
        <div class="progress-container">
          <span class="status-badge active" id="statusBadge">â— ×¤×¢×™×œ×•×ª ×¤×¢×™×œ×”</span>
          
          <div class="progress-title">×©××œ×•× ×™× ×©×”×•×©×œ××•</div>
          
          <div class="progress-numbers">
            <span id="completedCount">0</span>
            <span class="separator">/</span>
            <span id="totalCount">0</span>
          </div>
          
          <div class="progress-label">××©×ª×ª×¤×•×ª ×¡×™×™××• ××ª ×”×©××œ×•×Ÿ</div>
          
          <div class="progress-bar-wrapper">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
          </div>
          
          <div class="progress-percentage" id="progressPercentage">0%</div>
          
          <div class="refresh-timer" id="refreshTimer">
            ×¨×¢× ×•×Ÿ ×”×‘× ×‘×¢×•×“ <span id="timerSeconds">45</span> ×©× ×™×•×ª
          </div>
        </div>
        
        <div class="buttons-row">
          <button class="btn btn-secondary" id="updateCountBtn">
            ğŸ“ ×¢×“×›×•×Ÿ ×›××•×ª ××©×ª×ª×¤×•×ª
          </button>
          <button class="btn btn-danger" id="resetBtn">
            ğŸ”„ ××™×¤×•×¡ ×”×¤×¢×™×œ×•×ª
          </button>
        </div>
        
        <button class="btn btn-primary" id="backToSetupBtn" style="margin-top: 12px;">
          â† ×—×–×¨×” ×œ×”×’×“×¨×•×ª
        </button>
        
        <div id="monitorStatusMsg" class="status-msg"></div>
        
      </div>
      
      <center>
        <a href="pairing.html" class="back-link">â† ×—×–×¨×” ×œ×¢××•×“ ×”×¨××©×™</a>
      </center>
      
    </div>
  </div>

  <!-- Firebase SDK - Firestore -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, doc, setDoc, getDoc, updateDoc, onSnapshot, query, where, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    // TODO: ×”×—×œ×™×¤×™ ××ª ×”×§×•× ×¤×™×’×•×¨×¦×™×” ×”×–×• ×¢× ×”×§×•× ×¤×™×’×•×¨×¦×™×” ×©×œ×š ×-Firebase Console
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ××œ×× ×˜×™×
    const setupView = document.querySelector('.setup-view');
    const monitoringView = document.querySelector('.monitoring-view');
    const form = document.getElementById('activityForm');
    const startBtn = document.getElementById('startBtn');
    const updateCountBtn = document.getElementById('updateCountBtn');
    const resetBtn = document.getElementById('resetBtn');
    const backToSetupBtn = document.getElementById('backToSetupBtn');
    
    // ××©×ª× ×™× ×’×œ×•×‘×œ×™×™×
    let currentSessionId = null;
    let refreshInterval = null;
    let timerInterval = null;
    let currentRefreshDelay = 45000;
    let isComplete = false;
    let unsubscribe = null;

    // ×‘×“×™×§×” ×× ×™×© ×¤×¢×™×œ×•×ª ×¤×¢×™×œ×” ×‘×˜×¢×™× ×”
    checkExistingActivity();

    // ×˜×•×¤×¡ ×”×ª×—×œ×ª ×¤×¢×™×œ×•×ª
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const instructorCode = document.getElementById('instructorCode').value.trim();
      const participantCount = parseInt(document.getElementById('participantCount').value);
      
      if (!instructorCode || !participantCount || participantCount < 2) {
        showSetupStatus('×× × ××œ××™ ××ª ×›×œ ×”×©×“×•×ª ×‘×¦×•×¨×” ×ª×§×™× ×”', 'error');
        return;
      }
      
      startBtn.disabled = true;
      startBtn.textContent = 'â³ ××¤×¢×™×œ...';
      
      try {
        // ×‘×“×™×§×” ×©×§×•×“ ×”××“×¨×™×›×” ×§×™×™×
        const instructorRef = doc(db, 'instructors', instructorCode);
        const instructorSnap = await getDoc(instructorRef);
        
        if (!instructorSnap.exists()) {
          showSetupStatus('âŒ ×§×•×“ ××“×¨×™×›×” ×œ× ×ª×§×™×Ÿ', 'error');
          startBtn.disabled = false;
          startBtn.textContent = 'ğŸš€ ×”×ª×—×™×œ×™ ××ª ×”×¤×¢×™×œ×•×ª';
          return;
        }
        
        // ×™×¦×™×¨×ª ×¡×©×Ÿ ×—×“×©
        const sessionId = 'session_' + Date.now();
        const sessionRef = doc(db, 'sessions', sessionId);
        
        await setDoc(sessionRef, {
          instructorCode: instructorCode,
          participantCount: participantCount,
          completedCount: 0,
          isActive: true,
          createdAt: Date.now(),
          status: 'active'
        });
        
        currentSessionId = sessionId;
        localStorage.setItem('currentSession', sessionId);
        
        showSetupStatus('âœ… ×”×¤×¢×™×œ×•×ª ×”×•×¤×¢×œ×” ×‘×”×¦×œ×—×”!', 'success');
        
        setTimeout(() => {
          switchToMonitoring();
          startMonitoring(sessionId);
        }, 1500);
        
      } catch (error) {
        console.error('Error:', error);
        showSetupStatus('âŒ ×©×’×™××”: ' + error.message, 'error');
        startBtn.disabled = false;
        startBtn.textContent = 'ğŸš€ ×”×ª×—×™×œ×™ ××ª ×”×¤×¢×™×œ×•×ª';
      }
    });

    // ×¢×“×›×•×Ÿ ×›××•×ª ××©×ª×ª×¤×•×ª
    updateCountBtn.addEventListener('click', async () => {
      const newCount = prompt('×”×–×™× ×™ ××¡×¤×¨ ××©×ª×ª×¤×•×ª ×—×“×©:', document.getElementById('totalCount').textContent);
      
      if (newCount && !isNaN(newCount) && parseInt(newCount) >= 2) {
        try {
          const sessionRef = doc(db, 'sessions', currentSessionId);
          await updateDoc(sessionRef, {
            participantCount: parseInt(newCount)
          });
          showMonitorStatus('âœ… ×›××•×ª ×”××©×ª×ª×¤×•×ª ×¢×•×“×›× ×”', 'success');
        } catch (error) {
          showMonitorStatus('âŒ ×©×’×™××” ×‘×¢×“×›×•×Ÿ', 'error');
        }
      }
    });

    // ××™×¤×•×¡ ×¤×¢×™×œ×•×ª
    resetBtn.addEventListener('click', async () => {
      if (!confirm('×”×× ××ª ×‘×˜×•×—×” ×©××ª ×¨×•×¦×” ×œ××¤×¡ ××ª ×”×¤×¢×™×œ×•×ª? ×¤×¢×•×œ×” ×–×• ×ª××—×§ ××ª ×›×œ ×”× ×ª×•× ×™×!')) {
        return;
      }
      
      try {
        const sessionRef = doc(db, 'sessions', currentSessionId);
        await updateDoc(sessionRef, {
          isActive: false,
          status: 'reset'
        });
        
        stopMonitoring();
        localStorage.removeItem('currentSession');
        currentSessionId = null;
        
        showMonitorStatus('âœ… ×”×¤×¢×™×œ×•×ª ××•×¤×¡×”', 'success');
        
        setTimeout(() => {
          switchToSetup();
          form.reset();
          document.getElementById('instructorCode').value = '2311';
        }, 2000);
        
      } catch (error) {
        showMonitorStatus('âŒ ×©×’×™××” ×‘××™×¤×•×¡', 'error');
      }
    });

    // ×—×–×¨×” ×œ×”×’×“×¨×•×ª
    backToSetupBtn.addEventListener('click', () => {
      stopMonitoring();
      switchToSetup();
    });

    // ×‘×“×™×§×ª ×¤×¢×™×œ×•×ª ×§×™×™××ª
    async function checkExistingActivity() {
      const savedSession = localStorage.getItem('currentSession');
      if (savedSession) {
        try {
          const sessionRef = doc(db, 'sessions', savedSession);
          const sessionSnap = await getDoc(sessionRef);
          
          if (sessionSnap.exists() && sessionSnap.data().isActive) {
            currentSessionId = savedSession;
            switchToMonitoring();
            startMonitoring(savedSession);
          }
        } catch (error) {
          console.error('Error checking existing activity:', error);
        }
      }
    }

    // ×”×ª×—×œ×ª ××¢×§×‘
    function startMonitoring(sessionId) {
      const sessionRef = doc(db, 'sessions', sessionId);
      
      // ×”××–× ×” ×œ×©×™× ×•×™×™× ×‘×–××Ÿ ×××ª
      unsubscribe = onSnapshot(sessionRef, (docSnap) => {
        if (docSnap.exists()) {
          const data = docSnap.data();
          updateProgress(data.completedCount || 0, data.participantCount || 0);
        }
      });
      
      // ×”×ª×—×œ×ª ×¨×¢× ×•×Ÿ ×“×™× ××™
      startDynamicRefresh();
    }

    // ×¢×“×›×•×Ÿ ×ª×¦×•×’×ª ×”×ª×§×“××•×ª
    function updateProgress(completed, total) {
      document.getElementById('completedCount').textContent = completed;
      document.getElementById('totalCount').textContent = total;
      
      const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
      document.getElementById('progressBar').style.width = percentage + '%';
      document.getElementById('progressPercentage').textContent = percentage + '%';
      
      // ×‘×“×™×§×” ×× ×”×•×©×œ×
      if (completed >= total && total > 0 && !isComplete) {
        isComplete = true;
        document.getElementById('statusBadge').textContent = 'ğŸ‰ ×›×œ ×”×©××œ×•× ×™× ×”×•×©×œ××•!';
        document.getElementById('statusBadge').classList.remove('active');
        document.getElementById('statusBadge').classList.add('complete');
        stopDynamicRefresh();
        showMonitorStatus('ğŸ‰ ××¢×•×œ×”! ×›×œ ×”××©×ª×ª×¤×•×ª ×¡×™×™××• ××ª ×”×©××œ×•×Ÿ', 'success');
      }
    }

    // ×¨×¢× ×•×Ÿ ×“×™× ××™
    function startDynamicRefresh() {
      currentRefreshDelay = 45000;
      scheduleNextRefresh();
    }

    function scheduleNextRefresh() {
      if (isComplete) return;
      
      startTimer(currentRefreshDelay / 1000);
      
      refreshInterval = setTimeout(() => {
        if (currentRefreshDelay === 45000) {
          currentRefreshDelay = 30000;
        } else if (currentRefreshDelay === 30000) {
          currentRefreshDelay = 15000;
        } else if (currentRefreshDelay === 15000) {
          currentRefreshDelay = 10000;
        }
        
        scheduleNextRefresh();
      }, currentRefreshDelay);
    }

    function startTimer(seconds) {
      let remaining = seconds;
      const timerElement = document.getElementById('timerSeconds');
      const timerContainer = document.getElementById('refreshTimer');
      
      timerContainer.classList.add('active');
      timerElement.textContent = remaining;
      
      if (timerInterval) clearInterval(timerInterval);
      
      timerInterval = setInterval(() => {
        remaining--;
        timerElement.textContent = remaining;
        
        if (remaining <= 0) {
          clearInterval(timerInterval);
          timerContainer.classList.remove('active');
        }
      }, 1000);
    }

    function stopDynamicRefresh() {
      if (refreshInterval) {
        clearTimeout(refreshInterval);
        refreshInterval = null;
      }
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
      document.getElementById('refreshTimer').textContent = '×›×œ ×”×©××œ×•× ×™× ×”×•×©×œ××• âœ“';
    }

    // ×¢×¦×™×¨×ª ××¢×§×‘
    function stopMonitoring() {
      if (unsubscribe) {
        unsubscribe();
        unsubscribe = null;
      }
      stopDynamicRefresh();
      isComplete = false;
      currentRefreshDelay = 45000;
    }

    // ××¢×‘×¨ ×‘×™×Ÿ ×ª×¦×•×’×•×ª
    function switchToMonitoring() {
      setupView.classList.remove('active');
      monitoringView.classList.add('active');
    }

    function switchToSetup() {
      monitoringView.classList.remove('active');
      setupView.classList.add('active');
      startBtn.disabled = false;
      startBtn.textContent = 'ğŸš€ ×”×ª×—×™×œ×™ ××ª ×”×¤×¢×™×œ×•×ª';
    }

    // ×”×•×“×¢×•×ª ×¡×˜×˜×•×¡
    function showSetupStatus(message, type) {
      const statusMsg = document.getElementById('setupStatusMsg');
      statusMsg.textContent = message;
      statusMsg.className = `status-msg status-${type}`;
      
      if (type === 'success') {
        setTimeout(() => {
          statusMsg.textContent = '';
          statusMsg.className = 'status-msg';
        }, 3000);
      }
    }

    function showMonitorStatus(message, type) {
      const statusMsg = document.getElementById('monitorStatusMsg');
      statusMsg.textContent = message;
      statusMsg.className = `status-msg status-${type}`;
      
      setTimeout(() => {
        statusMsg.textContent = '';
        statusMsg.className = 'status-msg';
      }, 5000);
    }
  </script>

</body>
</html>
